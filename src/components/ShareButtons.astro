---
import * as icons from 'lucide-static';

const { url } = Astro.props;
const fullUrl = `https://isabellagaragedoor.com${url}`; // Replace with your actual domain
---

<style>
  .share-buttons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 0rem;
  flex-wrap: wrap;
}

.share-buttons a,
.share-buttons button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.6rem;
  border-radius: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s ease;
}

.share-buttons svg {
  width: 1.5rem;
  height: 1.5rem;
  stroke-width: 2;
  stroke: none; /* Remove stroke so fill shows fully */
  fill: currentColor; /* Use currentColor to control fill via color */
}

.facebook {
  color: #1877F2; /* Facebook blue */
}
.twitter {
  color: #1DA1F2; /* Twitter blue */
}
.linkedin {
  color: #0A66C2; /* LinkedIn blue */
}
.copy {
  color: #FF6600; /* Your orange */
}



</style>

<div class="share-buttons">
<a class="facebook" href={`https://www.facebook.com/sharer/sharer.php?u=${fullUrl}`} target="_blank" rel="noopener" aria-label="Share on Facebook">
  <span style="stroke:#1877F2;" set:html={icons.Facebook} />
</a>

<a class="twitter" href={`https://twitter.com/intent/tweet?url=${fullUrl}`} target="_blank" rel="noopener" aria-label="Share on Twitter">
  <span style="stroke:#1DA1F2;" set:html={icons.Twitter} />
</a>

<a class="linkedin" href={`https://www.linkedin.com/shareArticle?mini=true&url=${fullUrl}`} target="_blank" rel="noopener" aria-label="Share on LinkedIn">
  <span style="stroke:#0A66C2;" set:html={icons.Linkedin} />
</a>

<button id="copyLinkBtn" class="copy" aria-label="Copy link">
  <span style="stroke:#FF6600;" set:html={icons.Link} />
</button>

</div>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("copyLinkBtn");
    if (!btn) return;

    btn.addEventListener("click", () => {
      const url = "https://isabellagaragedoor.com" + window.location.pathname;

      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(url)
          .then(() => showCopiedMessage())
          .catch(err => fallbackCopy(url));
      } else {
        fallbackCopy(url);
      }

      function fallbackCopy(text) {
        const textarea = document.createElement("textarea");
        textarea.value = text;
        textarea.setAttribute("readonly", "");
        textarea.style.position = "absolute";
        textarea.style.left = "-9999px";
        document.body.appendChild(textarea);
        textarea.select();

        try {
          document.execCommand("copy");
          showCopiedMessage();
        } catch (err) {
          console.error("Fallback copy failed", err);
        }

        document.body.removeChild(textarea);
      }

      function showCopiedMessage() {
        // Toast-like feedback instead of alert
        const toast = document.createElement("div");
        toast.textContent = "Link copied!";
        toast.style.position = "fixed";
        toast.style.bottom = "2rem";
        toast.style.left = "50%";
        toast.style.transform = "translateX(-50%)";
        toast.style.backgroundColor = "#1A334F";
        toast.style.color = "#fff";
        toast.style.padding = "0.75rem 1.25rem";
        toast.style.borderRadius = "6px";
        toast.style.fontSize = "0.9rem";
        toast.style.boxShadow = "0 2px 6px rgba(0,0,0,0.2)";
        toast.style.zIndex = "9999";
        document.body.appendChild(toast);

        setTimeout(() => {
          toast.style.transition = "opacity 0.5s ease";
          toast.style.opacity = "0";
          setTimeout(() => toast.remove(), 500);
        }, 2000);
      }
    });
  });
</script>

